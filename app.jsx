/* StrokeBot Simulator 7070 - external JSX build (no imports needed).
   How to use:
   - Keep index.html static.
   - Replace this file (app.jsx) with your new revision and refresh.
*/

// Put this above Q (or anywhere near it)
const CITE_TEXT = `Goyal, M., Ospel, J. M., Ganesh, A., Dowlatshahi, D., Volders, D., Möhlenbruch, M. A., Jumaa, M. A., Nimjee, S. M., Booth, T. C., Buck, B. H., Kennedy, J., Shankar, J. J., Dorn, F., Zhang, L., Hametner, C., Nardai, S., Zafar, A., Diprose, W., Vatanpour, S., … Hill, M. D. (2025). Endovascular treatment of stroke due to medium-vessel occlusion. New England Journal of Medicine, 392(14), 1385–1395. https://doi.org/10.1056/nejmoa2411668 
Interim analysis of the discount randomized controlled trial. (n.d.). https://professional.heart.org/en/-/media/PHD-Files/Meetings/ISC/2025/sci-news/DISCOUNT-Data-Summary-Slide--ISC-2025.pptx?sc_lang=en
Mokin, M., Jovin, T. G., Sheth, S. A., Nguyen, T. N., Asif, K. S., Hassan, A. E., Jadhav, A. P., Kenmuir, C., Liebeskind, D. S., Mansour, O., Nogueira, R. G., Novakovic, R., Ortega‐Gutierrez, S., Yoo, A. J., Guerrero, W. R., & Malik, A. M. (2025). Endovascular therapy in patients with acute ischemic stroke with large infarct: A guideline from the Society of Vascular and interventional neurology. Stroke: Vascular and Interventional Neurology, 5(2). https://doi.org/10.1161/svin.124.001581
Powers, W. J., Rabinstein, A. A., Ackerson, T., Adeoye, O. M., Bambakidis, N. C., Becker, K., Biller, J., Brown, M., Demaerschalk, B. M., Hoh, B., Jauch, E. C., Kidwell, C. S., Leslie-Mazwi, T. M., Ovbiagele, B., Scott, P. A., Sheth, K. N., Southerland, A. M., Summers, D. V., & Tirschwell, D. L. (2019). Guidelines for the early management of patients with acute ischemic stroke: 2019 update to the 2018 guidelines for the early management of acute ischemic stroke: A guideline for healthcare professionals from the American Heart Association/American Stroke Association. Stroke, 50(12). https://doi.org/10.1161/str.0000000000000211
Psychogios, M., Brehm, A., Ribo, M., Rizzo, F., Strbian, D., Räty, S., Arenillas, J. F., Martínez-Galdámez, M., Hajdu, S. D., Michel, P., Gralla, J., Piechowiak, E. I., Kaiser, D. P. O., Puetz, V., Van den Bergh, F., De Raedt, S., Bellante, F., Dusart, A., Hellstern, V., … Fischer, U. (2025). Endovascular treatment for stroke due to occlusion of medium or distal vessels. New England Journal of Medicine, 392(14), 1374–1384. https://doi.org/10.1056/nejmoa2408954
Thomalla, G., Simonsen, C. Z., Boutitie, F., Andersen, G., Berthezene, Y., Cheng, B., Cheripelli, B., Cho, T.-H., Fazekas, F., Fiehler, J., Ford, I., Galinovic, I., Gellissen, S., Golsari, A., Gregori, J., Günther, M., Guibernau, J., Häusler, K. G., Hennerici, M., … Gerloff, C. (2018). MRI-guided thrombolysis for stroke with unknown time of onset. New England Journal of Medicine, 379(7), 611–622. https://doi.org/10.1056/nejmoa1804355`;


const { useRef, useState } = React;

const A=console.assert,R=(a,b)=>Math.floor(Math.random()*(b-a+1))+a,C=a=>a[Math.floor(Math.random()*a.length)],G=()=>{try{if(typeof crypto!="undefined"&&crypto.randomUUID)return crypto.randomUUID()}catch(_){}return Math.random().toString(36).slice(2)+Date.now()},H=m=>m/60,CL=(x,n=100)=>Math.max(0,Math.min(n,x));
const NONAC=s=>s.onsetType==="unknown"?1:H(s.minutesSinceLKAW)>24,S=s=>s===100?"S":s>=97?"A+":s>=90?"A":s>=87?"B+":s>=80?"B":s>=77?"C+":s>=70?"C":s>=67?"D+":s>=60?"D":"F",mrs=()=>{const r=Math.random()*100;return r<63?0:r<78?1:r<88?2:r<93?3:r<98?4:5};
const EVT=["ICA","MCA - M1","MCA - proximal M2","MCA - distal M2","Basilar artery"],NON=["ACA - A1","ACA - A2","PCA - P1","PCA - P2","MCA - M3","MCA - M4"];const pickOcc=()=>{const t=[["ICA",20],["MCA - M1",30],["MCA - proximal M2",15],["MCA - distal M2",10],["MCA - M3",5],["MCA - M4",5],["PCA - P1",5],["ACA - A1",5],["Basilar artery",5]];let r=Math.random()*100,a=0;for(const[s,w]of t){a+=w;if(r<a)return s}return"Basilar artery"};
function UT(){const[t,set]=useState([]),r=useRef(0);return{toasts:t,push:(a,b,c="info",ms=3200)=>{const id=++r.current;set(v=>[...v,{id,title:a,msg:b,type:c}]);setTimeout(()=>set(v=>v.filter(x=>x.id!==id)),ms)}}}
const T=({items})=>(<div className="fixed top-3 right-3 z-[100] space-y-2">{items.map(t=>{const m=({good:"border-l-8 border-l-emerald-500",bad:"border-l-8 border-l-rose-500",warn:"border-l-8 border-l-amber-500"}[t.type])||"border-l-8 border-l-sky-400";return(<div key={t.id} className={"min-w-[260px] max-w-[360px] rounded-xl border px-3 py-2 shadow-2xl backdrop-blur-sm bg-slate-900/85 border-slate-700 text-slate-100 "+m}><div className="font-bold">{t.title}</div><div className="text-sm text-slate-300">{t.msg}</div></div>)})}</div>);
const J=({kind,children})=>{const c=kind==="good"?"bg-emerald-950/60 text-emerald-300 border-emerald-800":kind==="bad"?"bg-rose-950/60 text-rose-300 border-rose-800":"bg-sky-950/60 text-sky-200 border-sky-800";return <span className={"inline-block rounded-md border px-2 py-0.5 text-xs "+c}>{children}</span>};
const L=({label,value})=>(<div className="inline-flex items-center gap-2 rounded-full border border-slate-700 bg-slate-900/70 px-3 py-1 text-sm text-slate-200"><span className="font-semibold text-slate-300">{label}:</span><span>{value}</span></div>);
const CLS={btn:"rounded-lg border border-slate-700 bg-slate-900 px-3 py-2 text-sm font-semibold hover:bg-slate-800 disabled:opacity-60",vio:"rounded-lg border border-violet-700 bg-violet-900/40 px-3 py-2 text-sm font-semibold text-violet-200 hover:bg-violet-900/60",on:"border-slate-600 bg-slate-800 text-slate-100",off:"border-slate-700 bg-slate-900 text-slate-400 hover:bg-slate-800"};const K="rounded-2xl border border-slate-800 bg-slate-900/60 p-4 shadow-xl",W="rounded-xl border border-slate-800 bg-slate-950/70",CI=s=>[s.doac&&"DOAC <=48h",s.recentGISurgery&&"GI surgery 7d",s.recentStroke30d&&"Prior stroke 30d",s.glucose<60&&("Hypoglycemia ("+s.glucose+")")].filter(Boolean);
const D=({open,title,message,ok="Confirm",cancel="Cancel",onOK,onX})=>open?(<div className="fixed inset-0 z-[120] grid place-items-center"><div className="absolute inset-0 bg-black/60" onClick={onX}/><div className="relative w-[min(96vw,480px)] rounded-2xl border border-slate-700 bg-slate-900 p-4 shadow-2xl"><div className="text-base font-semibold">{title}</div><div className="mt-2 text-sm text-slate-300 whitespace-pre-wrap">{message}</div><div className="mt-4 flex justify-end gap-2"><button onClick={onX} className="rounded-lg border border-slate-700 bg-slate-800 px-3 py-1.5 text-sm">{cancel}</button><button onClick={onOK} className="rounded-lg border border-emerald-700 bg-emerald-900/40 px-3 py-1.5 text-sm font-semibold text-emerald-200">{ok}</button></div></div></div>):null;
function ASPECTS(o,m,site,type){if(type==="Mimic")return{score:10};if(type!=="Ischemic")return{score:null};if(site==="Basilar artery"||(site&&site.includes("PCA")))return{score:10};const ant=site?site.includes("MCA")||site==="ICA":1,hrs=o==="known"?H(m):o==="wake-up"?R(6,12):R(6,18);let b=10-Math.floor(hrs/3);if(ant){if(site==="MCA - M1"||site==="ICA")b--;if(site==="MCA - proximal M2")b--}b+=C([0,0,0,1,-1]);return{score:CL(b,10)}}
function NIH({type,affectedSide,dominantSide,site,mimicBias=null}){const z=n=>CL(n,4),d=(n,h)=>CL(n,h);let facial=0,gaze=0,visual=0,armL=0,armR=0,legL=0,legR=0,language=0,dysarthria=0,ataxia=0,sensory=0;if(type==="Mimic"){if(mimicBias==="non"){sensory=C([0,1]);dysarthria=C([0,1])}else{sensory=C([0,1]);dysarthria=C([0,1]);if(Math.random()<.25)facial=1}}else if(type==="ICH"||type==="SAH"){facial=d(R(0,2),3);gaze=d(R(0,2),2);visual=d(R(0,2),3);dysarthria=d(R(0,2),2);if(affectedSide==="left"){armL=z(R(1,3));legL=z(R(1,3))}else{armR=z(R(1,3));legR=z(R(1,3))}language=affectedSide===(dominantSide==="right"?"left":"right")?d(R(0,2),3):0}else if(type==="SDH"){facial=d(R(0,2),3);gaze=d(R(0,1),1);visual=d(R(0,1),2);if(affectedSide==="left"){armL=z(R(1,3));legL=z(R(1,3));armR=z(R(0,1));legR=z(R(0,1))}else{armR=z(R(1,3));legR=z(R(1,3));armL=z(R(0,1));legL=z(R(0,1))}language=affectedSide===(dominantSide==="right"?"left":"right")?d(R(0,1),2):0;dysarthria=d(R(0,2),2);ataxia=d(R(0,1),1);sensory=d(R(0,2),2)}else{const sev=["ICA","MCA - M1","Basilar artery"].includes(site),mod=site==="MCA - proximal M2"||site==="MCA - distal M2",mild=NON.includes(site)||!site;facial=d(R(0,sev?2:mod?2:1),3);gaze=d(R(0,sev?2:1),2);visual=d(R(0,sev?2:1),3);if(affectedSide==="left"){armL=z(R(sev?2:mod?1:0,sev?4:mod?3:2));legL=z(R(sev?2:mod?1:0,sev?4:mod?3:2))}else{armR=z(R(sev?2:mod?1:0,sev?4:mod?3:2));legR=z(R(sev?2:mod?1:0,sev?4:mod?3:2))}language=affectedSide===(dominantSide==="right"?"left":"right")?d(R(mild?0:1,sev?3:2),3):0;dysarthria=d(R(0,mod||sev?2:1),2);ataxia=d(R(0,mod||sev?2:1),2);sensory=d(R(0,2),2)}if(site==="Basilar artery"||(site&&site.includes("PCA")))language=0;if(affectedSide==="left"&&(armL>0||legL>0)&&language>0)language=Math.random()<.02?language:0;const total=facial+gaze+visual+armL+armR+legL+legR+language+dysarthria+ataxia+sensory;return{facial,gaze,visual,armL,armR,legL,legR,language,dysarthria,ataxia,sensory,total}}
const isDisab=(d,dom)=>{const L=d.armL>0||d.legL>0,Ru=d.armR>0||d.legR>0,uni=(L&&!Ru)||(Ru&&!L),domUE=dom==="right"?d.armR>0:d.armL>0,le=d.legL>0||d.legR>0;return uni||domUE||le||d.language>0||d.dysarthria>=2||d.ataxia>0||d.gaze>0||d.visual>0||d.facial>=2};
const admitOK=(s,a)=>{const icu=s.type==="ICH"||s.type==="SAH"||s.type==="SDH"||s.actions.tnk||s.actions.evt||s.nihssDetail.total>=10;return(icu&&a==="nicu")||(!icu&&a==="floor")};
const MRIok=s=>s&&s.type==="Ischemic"&&s.actions.ctNonCon&&s.actions.cta&&s.userClass==="disabling"&&((s.onsetType==="wake-up"&&(!s.ctaOcclusion||(s.ctaOcclusion==="MCA - distal M2"?!(H(s.minutesSinceLKAW)<=6||!s.actions.ctp||s.ischemicVolume>100||s.perfMismatch):!EVT.includes(s.ctaOcclusion))))||(s.onsetType==="unknown"&&!s.ctaOcclusion));
const TNKok=s=>s.type==="Ischemic"&&s.userClass==="disabling"&&!s.doac&&!s.recentGISurgery&&!s.recentStroke30d&&s.glucose>=60&&s.actions.ctNonCon&&((s.onsetType==="known"&&H(s.minutesSinceLKAW)<=4.5)||((s.onsetType==="wake-up"||s.onsetType==="unknown")&&s.actions.mri&&!s.ctaOcclusion&&s.mriMismatch));
const EVTok=s=>s.type==="Ischemic"&&s.ctaOcclusion&&s.baselineMrs!==5&&((s.ctaOcclusion==="MCA - distal M2"&&H(s.minutesSinceLKAW)>6&&s.actions.ctp&&(s.ischemicVolume>100||s.perfMismatch))||(EVT.includes(s.ctaOcclusion)&&H(s.minutesSinceLKAW)<=24));
function Y({detail,onChoose}){if(!detail)return null;const r=[["Facial",detail.facial],["Gaze/Eyes",detail.gaze],["Visual fields",detail.visual],["Left arm",detail.armL],["Right arm",detail.armR],["Left leg",detail.legL],["Right leg",detail.legR],["Language",detail.language],["Dysarthria",detail.dysarthria],["Ataxia",detail.ataxia],["Sensory",detail.sensory]];return(<div className="mt-3 rounded-xl border border-slate-800 bg-slate-950/60 p-3"><div className="text-sm font-semibold">Neurologic exam summary (NIHSS)</div><div className="mt-2 grid grid-cols-2 gap-2 text-xs text-slate-300 sm:grid-cols-3">{r.map(([k,v])=>(<div key={k} className="flex items-center justify-between rounded-lg border border-slate-800 bg-slate-900/50 px-2 py-1"><span>{k}</span><span className="font-mono">{v}</span></div>))}<div className="col-span-2 sm:col-span-3 flex items-center justify-between rounded-lg border border-slate-800 bg-slate-900/60 px-2 py-1"><span>Total NIHSS</span><span className="font-mono font-bold">{detail.total}</span></div></div><div className="mt-3 flex flex-wrap gap-2"><button onClick={()=>onChoose("non")} className="rounded-lg border border-slate-700 bg-slate-900 px-3 py-1.5 text-sm font-semibold hover:bg-slate-800">Non-disabling</button><button onClick={()=>onChoose("disabling")} className="rounded-lg border border-emerald-700 bg-emerald-900/40 px-3 py-1.5 text-sm font-semibold text-emerald-200 hover:bg-emerald-900/60">Disabling</button></div></div>)}
function gen(mode="learning"){const age=R(38,92),sex=C(["male","female"]);let onsetType="known",minutesSinceLKAW=R(10,270),type="Ischemic",baselineMrs=mrs(),ctaOcclusion=null,dominantSide=Math.random()<.9?"right":"left",affectedSide=C(["left","right"]),doac=Math.random()<.1,recentGISurgery=Math.random()<.05,recentStroke30d=Math.random()<.06,glucose=Math.random()<.08?R(40,59):R(60,280),perfMismatch=false,ischemicVolume=0;if(mode==="learning"){const r=Math.random();baselineMrs=mrs();doac=recentGISurgery=recentStroke30d=false;glucose=R(80,180);if(r<.15){type="ICH";ctaOcclusion=null;onsetType="known";minutesSinceLKAW=R(30,1440)}else if(r<.17){type="SAH";ctaOcclusion=null;onsetType="known";minutesSinceLKAW=R(30,1440)}else if(r<.20){type="SDH";ctaOcclusion=null;onsetType="known";minutesSinceLKAW=R(30,1440)}else{type="Ischemic";const ev=Math.random()<.66;if(ev){ctaOcclusion=pickOcc();minutesSinceLKAW=ctaOcclusion==="MCA - distal M2"?R(361,1200):R(30,1200);perfMismatch=Math.random()<.5;ischemicVolume=R(30,160)}else{ctaOcclusion=null;onsetType=C(["known","wake-up","unknown"]);minutesSinceLKAW=onsetType==="known"?R(60,540):R(240,960);ischemicVolume=R(10,80)}}}else{const r=Math.random();if(r<.7){type="Mimic";ctaOcclusion=null;onsetType=C(["known","wake-up","unknown"]);minutesSinceLKAW=onsetType==="known"?R(30,600):onsetType==="wake-up"?R(360,1440):R(120,1440)}else if(r<.73){type="SAH";onsetType="known";minutesSinceLKAW=R(30,1440)}else if(r<.88){type="Ischemic";ctaOcclusion=pickOcc();minutesSinceLKAW=ctaOcclusion==="MCA - distal M2"?R(361,1200):R(30,1200);perfMismatch=Math.random()<.5;ischemicVolume=R(30,160)}else if(r<.93){type="Ischemic";onsetType="known";minutesSinceLKAW=R(10,270);doac=Math.random()<.05;recentGISurgery=Math.random()<.03;recentStroke30d=Math.random()<.03;glucose=R(70,220)}else{if(Math.random()<.6)type="ICH";else{type="Ischemic";ctaOcclusion=Math.random()<.86?pickOcc():null}onsetType=C(["known","wake-up","unknown"]);minutesSinceLKAW=onsetType==="known"?R(60,1440):R(240,1440);if(ctaOcclusion==="MCA - distal M2"){onsetType="known";if(minutesSinceLKAW<=360)minutesSinceLKAW=R(361,1200)}}}if(mode==="learning"&&Math.random()<.15){const k=C(["doac","recentGISurgery","recentStroke30d","glc"]);if(k==="glc")glucose=R(40,59);else if(k==="doac")doac=true;else if(k==="recentGISurgery")recentGISurgery=true;else recentStroke30d=true}
let mimicBias=null;if(type==="Mimic"&&Math.random()<.7)mimicBias="non";let nihssDetail=NIH({type,affectedSide,dominantSide,site:ctaOcclusion,mimicBias});if(type==="Mimic"&&mimicBias==="non"&&isDisab(nihssDetail,dominantSide))nihssDetail=NIH({type,affectedSide,dominantSide,site:ctaOcclusion,mimicBias:"non"});if(type==="Ischemic"&&ischemicVolume===0){perfMismatch=Math.random()<(ctaOcclusion?0.55:0.3);ischemicVolume=R(20,ctaOcclusion?180:90)}let ctpTmax6=0,ctpRcbf30=0;if(type==="Ischemic"){ctpTmax6=ischemicVolume;const rr=perfMismatch?C([1.8,2.1,2.4,2.8,3.0]):C([1.0,1.2,1.3,1.4,1.5]);ctpRcbf30=Math.max(1,Math.round(ctpTmax6/rr))}const ems=[],activator=Math.random()<.75?"EMS":"Inpatient staff";if(doac)ems.push("recent DOAC ingestion within 48h");if(recentGISurgery)ems.push("GI surgery within the past week");if(recentStroke30d)ems.push("prior stroke within the last month");if(glucose<60)ems.push("fingerstick glucose "+glucose+" mg/dL");const emsLine=ems.length?"\n"+activator+" adds: "+ems.join("; ")+".":"",mrs5=baselineMrs===5?"\n"+activator+" reports the patient has severe baseline disability (mRS 5).":"";const d=nihssDetail,side=affectedSide,arm=(side==="left"?d.armL:d.armR)>0,leg=(side==="left"?d.legL:d.legR)>0,hints=[];if(arm&&leg)hints.push(side+"-sided weakness");else if(arm)hints.push(side+" arm weakness");else if(leg)hints.push(side+" leg weakness");if(d.language>0)hints.push("word-finding difficulty");if(d.dysarthria>0)hints.push("slurred speech");if(d.facial>0)hints.push(side+" facial droop");if(d.gaze>0)hints.push("gaze deviation");if(d.visual>0)hints.push("visual field deficit");if(d.ataxia>0)hints.push("incoordination");if(d.sensory>0)hints.push("numbness");const hint=hints.slice(0,2).join(" and ");let sbp=type==="ICH"?R(180,230):R(100,185);let dbp=type==="ICH"?R(95,130):R(55,(sbp<140?99:110));const extra=hint?(" for deficits of "+hint):"",lka=onsetType==="known"?Math.round(H(minutesSinceLKAW)*10)/10+" hours ago":onsetType==="wake-up"?"wake-up stroke (unknown exact time)":"unknown",stem=activator+" activates a stroke code for a "+age+"-year-old "+sex+extra+".\nLast known awake & well: "+lka+".\nArrival vitals: BP "+sbp+"/"+dbp+", HR "+R(56,118)+", SpO2 "+R(92,100)+"%."+mrs5+emsLine+"\nYou are at bedside with the team.";return{mode,age,sex,onsetType,minutesSinceLKAW,baselineMrs,type,ctaOcclusion,dominantSide,affectedSide,nihssDetail,doac,glucose,recentGISurgery,recentStroke30d,perfMismatch,ischemicVolume,ctpTmax6,ctpRcbf30,aspects:null,mriMismatch:Math.random()<.55,actions:{examine:false,ctNonCon:false,cta:false,ctp:false,mri:false,tnk:false,evt:false,admitted:null,cancel:false},userClass:null,score:100,finished:false,stem,sbp,dbp}}
function X({onAction,disabled,disabledMap,hideSubs}){const M={examine:["Examine","NIHSS, glucose, HPI, LKAW"],ctNonCon:["CT Head (Non-con)","Rule out hemorrhage + ASPECTS"],cta:["CTA Head & Neck","Identify occlusion & site"],ctp:[">6h only; distal M2 guidance",""],mri:["Hyperacute MRI (DWI/FLAIR)","Wake-up/Unknown if no LVO"],tnk:["Administer TNK","Known <=4.5h or MRI mismatch"],evt:["Endovascular Thrombectomy","By site & time"],floor:["Admit to Floor","Stroke unit care"],nicu:["Admit to NeuroICU","Higher acuity"],cancel:["Cancel Code Stroke","End code if criteria met"]},b="rounded-xl px-4 py-3 text-left font-semibold disabled:opacity-60 border",d="border-slate-700 bg-slate-900/70 text-slate-100 hover:bg-slate-800/70",g="border-emerald-700 bg-emerald-900/40 text-emerald-200 hover:bg-emerald-900/60",y="border-sky-700 bg-sky-900/40 text-sky-200 hover:bg-sky-900/60",V={tnk:g,evt:g,floor:y,nicu:y,cancel:"border-rose-700 bg-rose-900/40 text-rose-200 hover:bg-rose-900/60"};const B=k=>{const it=M[k][0],s=M[k][1],color=V[k]||d,size=k==="mri"?" px-2.5 py-2 w-[70%] max-w-[360px] text-sm":k==="cancel"?" px-2 py-1.5 w-[60%] max-w-[300px] text-sm":"";return(<button key={k} onClick={()=>onAction(k)} disabled={disabled||!!disabledMap[k]} className={b+" "+color+size}><div>{it}</div>{!hideSubs&&s&&<div className="text-xs font-normal text-slate-400">{s}</div>}</button>)};return(<div className="grid grid-cols-2 gap-2">{B("examine")}{B("ctNonCon")}{B("cta")}{B("ctp")}<div className="col-span-2 flex justify-center">{B("mri")}</div><div className="col-span-2 my-1 border-t border-slate-700"/>{B("tnk")}{B("evt")}<div className="col-span-2 my-1 border-t border-slate-700"/>{B("floor")}{B("nicu")}<div className="col-span-2 flex justify-center">{B("cancel")}</div></div>)}
function N({s}){const fmt=m=>{const h=Math.floor(m/60),mm=m%60;return h?h+"h "+mm+"m":mm+"m"},on=s.onsetType==="known"?fmt(s.minutesSinceLKAW)+" since LKAW":s.onsetType==="wake-up"?"Wake-up stroke (unknown exact time)":"Unknown LKAW",cx=[];s.doac&&cx.push("DOAC <=48h");s.recentGISurgery&&cx.push("GI surgery 7d");s.recentStroke30d&&cx.push("Prior stroke 30d");s.glucose<60&&cx.push("Hypoglycemia ("+s.glucose+")");const perf=s.type==="Ischemic"?"TMax>6s "+s.ctpTmax6+"cc; rCBF<30% "+s.ctpRcbf30+"cc (ratio "+(s.ctpTmax6/Math.max(1,s.ctpRcbf30)).toFixed(1)+")":"n/a",items=[["Age / Sex",s.age+" / "+s.sex],["Onset",on],["Baseline mRS",s.baselineMrs],...(cx.length?[["Contraindications",cx.join(", ")]]:[]),...(s.actions.examine?[["NIHSS total",s.nihssDetail.total],["Glucose",s.glucose+" mg/dL"]]:[]),...(s.actions.ctNonCon?[["CT Head",(s.type==="Ischemic"||s.type==="Mimic")?("No hemorrhage"+(s.aspects!==null?", ASPECTS "+s.aspects:"")):s.type+" on CT"]]:[]),...(s.actions.cta?[["CTA",s.type==="Ischemic"?(s.ctaOcclusion?s.ctaOcclusion:"No occlusion"):"n/a"]]:[]),...(s.actions.ctp?[["CT Perfusion",perf]]:[]),...(s.actions.mri?[["Hyperacute MRI",s.mriMismatch?"DWI/FLAIR mismatch":"No mismatch"]]:[]),...(s.actions.tnk?[["TNK","Given"]]:[]),...(s.actions.evt?[["EVT","Performed"]]:[]),...(s.actions.cancel||s.actions.admitted?[["Disposition",s.actions.cancel?"Code cancelled":s.actions.admitted==="nicu"?"NeuroICU":"Floor"]]:[])];return(<div className="mt-2 flex flex-wrap gap-2">{items.map(([k,v])=>(<L key={k} label={k} value={String(v)}/>))}</div>)}
const Q = ({open,onX}) => open ? (
  <div className="fixed inset-0 z-[130] grid place-items-center">
    <div className="absolute inset-0 bg-black/60" onClick={onX}/>
    <div className="relative w=[min(96vw,720px)] max-h-[80vh] overflow-y-auto rounded-2xl border border-slate-700 bg-slate-900 p-4 shadow-2xl">
      <button onClick={onX} className="absolute right-2 top-2 rounded-md border border-slate-700 px-2 py-1 text-xs text-slate-300">Close</button>
      <h3 className="text-base font-semibold pr-8">citations</h3>
      <pre className="mt-2 whitespace-pre-wrap break-words text-sm text-slate-300">{CITE_TEXT}</pre>
    </div>
  </div>
) : null;
function App(){const{toasts,push}=UT();const[mode,setMode]=useState("learning"),[data,set]=useState(()=>gen(mode)),[log,setLog]=useState([]),[show,setShow]=useState(false),[pAdmit,setPA]=useState(null),[pMode,setPM]=useState(null),[pCancel,setPC]=useState(false),[showCite,setCite]=useState(false);const add=(k,t)=>setLog(l=>[{id:G(),kind:k,text:t,t:Date.now()},...l]);const reset=()=>{const c=gen(mode);set(c);setLog([]);setShow(false);setPA(null);push("New case ready","Mode: "+mode+". Start with an exam, then image appropriately.")};const askMode=n=>{if(n!==mode)setPM(n)};const applyMode=n=>{setMode(n);const c=gen(n);set(c);setLog([]);setShow(false);setPA(null);push("Mode switched","Now in "+n+" mode. New case generated.")};const commitAdmit=a=>{if(data.finished){push("Case finished","Start a new case to continue.","warn");return}const s={...data,actions:{...data.actions,admitted:a}},ok=admitOK(s,a),u=a==="nicu"?"NeuroICU":"Floor";s.score=CL(s.score+(ok?4:-10));add(ok?"good":"bad",ok?u+" appropriate.":u+" suboptimal for condition.");push("Disposition selected",u+" chosen. Case will be graded.",ok?"good":"warn",4200);setPA(null);finish(s)};const commitCancel=()=>{if(data.finished){push("Case finished","Start a new case to continue.","warn");setPC(false);return}const s={...data,actions:{...data.actions,cancel:true}},ev=isDisab(s.nihssDetail,s.dominantSide),ok=NONAC(s)||(s.userClass!==null?s.userClass==="non":!ev)||s.type==="Mimic";s.finished=true;if(ok){s.score=CL(s.score+8);push("Code stroke cancelled","Cancelled for "+[NONAC(s)&&">24h",s.userClass==="non"&&"non-disabling",s.type==="Mimic"&&"non-neurologic"].filter(Boolean).join(", ")+".","good");add("good","Cancelled appropriately.")}else{s.score=CL(s.score-16);push("Cancelled prematurely","Patient remains acute, disabling, and neurologic - continue evaluation/treatment.","bad");add("bad","Cancelled prematurely.")}set(s);setPC(false)};const act=a=>{if(data.finished){push("Case finished","Start a new case to continue.","warn");return}const s={...data,actions:{...data.actions}},B=(d,t,m)=>{s.score=CL(s.score-d);push(t,m,"bad");add("bad",m)},Gd=(d,t,m)=>{s.score=CL(s.score+d);push(t,m,"good");add("good",m)};switch(a){case"examine":if(s.actions.examine){B(2,"Already examined","Repeated action.");break}s.actions.examine=1;Gd(3,"Exam complete","NIHSS "+s.nihssDetail.total+", glucose "+s.glucose+" mg/dL. Please classify as disabling or non-disabling.");break;case"ctNonCon":if(s.actions.ctNonCon){B(2,"CT repeated","Duplicate non-contrast CT.");break}if(!s.actions.examine)B(3,"Premature imaging","Rapid exam first helps triage and consent.");s.actions.ctNonCon=1;if(s.type==="ICH"||s.type==="SAH"||s.type==="SDH"){Gd(4,"CT done",s.type+" detected. TNK and EVT are contraindicated.");push("Recommended","Admit to NeuroICU and manage accordingly.","info",2600)}else{const e=ASPECTS(s.onsetType,s.minutesSinceLKAW,s.ctaOcclusion,s.type);s.aspects=e.score;Gd(4,"CT done","No hemorrhage identified. ASPECTS "+(e.score!=null?e.score:"n/a")+".")}break;case"cta":if(s.actions.cta){B(2,"CTA repeated","Duplicate CTA.");break}if(!s.actions.ctNonCon)B(5,"Out of sequence","Perform non-contrast CT before CTA.");s.actions.cta=1;if(s.type!=="Ischemic")B(4,"CTA low yield","Primary hemorrhage or mimic - CTA rarely helpful.");else if(s.ctaOcclusion){Gd(6,"CTA result","Occlusion: "+s.ctaOcclusion+".");const h=H(s.minutesSinceLKAW);if(h>6&&s.ctaOcclusion==="MCA - distal M2")push("Consider CTP",">6h LKAW and distal M2 - obtain CTP to guide EVT (large territory or favorable ratio).","info",4600)}else Gd(4,"CTA result","No proximal occlusion identified.");if(MRIok(s))push("Next step","Hyperacute MRI appropriate for TNK evaluation.","info",5200);break;case"ctp":{const h=H(s.minutesSinceLKAW);if(h<6){B(6,"Too early for CTP","CT perfusion should not be obtained prior to 6 hours from LKAW.");break}if(s.actions.ctp){B(2,"CTP repeated","Duplicate perfusion imaging.");break}if(!s.actions.ctNonCon)B(4,"Out of sequence","Perform non-contrast CT first.");s.actions.ctp=1;if(s.type!=="Ischemic")B(4,"CTP not indicated","Perfusion imaging does not apply to hemorrhage or mimic.");else if(s.ctaOcclusion==="MCA - distal M2"){const ok=s.ischemicVolume>100||s.perfMismatch;if(ok)Gd(6,"CTP favorable","TMax>6s "+s.ctpTmax6+"cc; rCBF<30% "+s.ctpRcbf30+"cc (ratio "+(s.ctpTmax6/Math.max(1,s.ctpRcbf30)).toFixed(1)+"). Supports EVT for distal M2.");else{add("info","CTP unfavorable: TMax>6s "+s.ctpTmax6+"cc; rCBF<30% "+s.ctpRcbf30+"cc (ratio "+(s.ctpTmax6/Math.max(1,s.ctpRcbf30)).toFixed(1)+").");push("CTP result","Not favorable for distal M2 intervention.","warn",4000)}}else add("info","CTP recorded: TMax>6s "+s.ctpTmax6+"cc; rCBF<30% "+s.ctpRcbf30+"cc (ratio "+(s.ctpTmax6/Math.max(1,s.ctpRcbf30)).toFixed(1)+").");if(MRIok(s))push("Next step","Hyperacute MRI appropriate for TNK evaluation.","info",5200);break}case"mri":if(s.actions.mri){B(2,"MRI repeated","Duplicate MRI.");break}if(!MRIok(s)){B(4,"MRI not available","Hyperacute MRI is reserved for wake-up/unknown per rules.");break}s.actions.mri=1;if(s.mriMismatch){add("good","MRI: DWI/FLAIR mismatch present.");push("MRI result","Mismatch present - consider TNK if otherwise eligible.","good",4800)}else{add("info","MRI: No DWI/FLAIR mismatch.");push("MRI result","No mismatch - TNK not indicated.","warn",4800)}break;case"tnk":if(s.actions.tnk){B(3,"TNK already given","Duplicate thrombolysis is unsafe.");break}if(!s.actions.ctNonCon)B(8,"Unsafe sequence","Rule out hemorrhage on non-contrast CT before thrombolysis.");if(s.type!=="Ischemic"){B(40,"Contraindicated","Hemorrhage or mimic present. Do not administer TNK.");s.actions.tnk=1;break}if(!s.userClass){B(5,"Classify first","Classify deficits as Disabling vs Non-disabling before TNK.");break}if(!TNKok(s)){let q=CI(s);if(q.length){B(18,"Contraindicated","Contraindication present: "+q.join(", ")+".");s.actions.tnk=1;break}B(18,"TNK not indicated","Known <=4.5h or wake-up/unknown + MRI mismatch required.");s.actions.tnk=1;break}s.actions.tnk=1;Gd(10,"TNK administered","Appropriate selection.");break;case"evt":if(s.actions.evt){B(3,"EVT already performed","Duplicate EVT not possible.");break}if(!s.actions.ctNonCon)B(8,"Unsafe sequence","Perform non-contrast CT first.");if(!s.actions.cta)B(6,"Missing CTA","Identify occlusion and site on CTA before EVT.");if(s.type!=="Ischemic"){B(40,"Contraindicated","Hemorrhage or mimic - EVT not indicated.");s.actions.evt=1;break}if(s.baselineMrs===5){B(15,"Not indicated (mRS 5)","Baseline mRS 5 - no thrombectomy indicated.");s.actions.evt=1;break}if(!s.ctaOcclusion){B(18,"No target","No occlusion identified on CTA.");s.actions.evt=1;break}{const h2=H(s.minutesSinceLKAW);if(s.ctaOcclusion==="MCA - distal M2"&&h2>6&&(!s.actions.ctp||!(s.ischemicVolume>100||s.perfMismatch))){B(16,"Insufficient criteria","Distal M2 >6h requires favorable CTP (large territory or favorable ratio). ");s.actions.evt=1;break}if(!EVTok(s)){B(16,"Site/time not appropriate","EVT not indicated for "+s.ctaOcclusion+" at this time.");s.actions.evt=1;break}}s.actions.evt=1;Gd(12,"EVT performed","Appropriate candidate treated.");break;case"floor":case"nicu":if(s.actions.admitted){B(2,"Disposition chosen","Duplicate disposition.");break}setPA(a);return;case"cancel":if(s.actions.cancel){B(2,"Already cancelled","Code already cancelled.");break}setPC(true);return}set(s)};const finish=so=>{if(!so&&data.finished){push("Already graded","Start a new case to continue.","warn");return}const s=so?{...so}:{...data},req=new Set(["examine","ctNonCon"]);if(s.type==="Ischemic"){if(s.ctaOcclusion)req.add("cta");if(TNKok(s))req.add("tnk");if(EVTok(s))req.add("evt")}else if(s.type==="ICH"||s.type==="SAH"||s.type==="SDH")req.add("nicu");if(!s.actions.admitted&&!s.actions.cancel)req.add("disposition");const miss=[];for(const st of req){if(st==="examine"&&!s.actions.examine)miss.push("Examined patient");if(st==="ctNonCon"&&!s.actions.ctNonCon)miss.push("Obtained non-contrast CT");if(st==="cta"&&!s.actions.cta)miss.push("Obtained CTA");if(st==="tnk"&&!s.actions.tnk)miss.push("Administered TNK when indicated");if(st==="evt"&&!s.actions.evt)miss.push("Performed EVT when indicated");if(st==="disposition"&&!s.actions.admitted&&!s.actions.cancel)miss.push("Selected disposition or cancelled code appropriately")}let pen=0;if(miss.length)pen+=Math.min(60,miss.length*10);if((s.type==="ICH"||s.type==="SAH"||s.type==="Mimic")&&(s.actions.tnk||s.actions.evt))pen+=25;if(s.type==="Ischemic"){if(s.actions.tnk&&!TNKok(s))pen+=15;if(s.actions.evt&&!EVTok(s))pen+=15}const final=CL(s.score-pen),g=S(final),sum=[miss.length?("Missed steps: "+miss.join("; ")+"."):("All essential steps completed.")];push("Case graded: "+g,sum.join(" "),g[0]==="A"||g[0]==="B"?"good":g[0]==="C"?"warn":"bad",6600);add("info","Final summary -> "+sum.join(" "));set({...s,score:final,finished:true})};const choose=v=>{const ok=(v==="disabling"&&isDisab(data.nihssDetail,data.dominantSide))||(v==="non"&&!isDisab(data.nihssDetail,data.dominantSide));set(d=>({...d,userClass:v,score:CL(d.score+(ok?4:-5))}));push("Classification recorded","You chose "+(v==="disabling"?"Disabling":"Non-disabling")+".",ok?"good":"warn");add(ok?"good":"bad",ok?("Classification correct: "+v+"."):("Classification likely incorrect: "+v+"."))};const DM=(()=>{const A=data.actions||{},dm={};for(const k of["examine","ctNonCon","cta","ctp","mri","tnk","evt","cancel"])dm[k]=!!A[k];dm.mri=!!A.mri||!MRIok(data);dm.floor=!!A.admitted||data.finished||!!A.cancel;dm.nicu=dm.floor;return dm})();const admitLbl=pAdmit==="nicu"?"NeuroICU":"Floor",admitTitle="Admit to "+admitLbl+"?",admitMsg="Admit to "+admitLbl+" now? This will end and grade the case.",modeMsg=pMode==="learning"?"Learning mode: fewer mimics and more intervention-eligible cases. Switching resets the current case. Continue?":"Realistic mode: more mimics and contraindications. Switching resets the current case. Continue?";return(<div className="min-h-screen bg-gradient-to-b from-slate-950 to-slate-900 text-slate-100"><T items={toasts}/><header className="sticky top-0 z-20 border-b border-slate-800/80 bg-slate-950/70 px-4 py-3 backdrop-blur"><div className="mx-auto flex max-w-6xl items-center gap-3"><h1 className="text-lg font-bold">StrokeBot Simulator 7070</h1><div className="ml-auto flex items-center gap-2 text-xs text-slate-400"><span>Mode:</span><div className="inline-flex items-center gap-2"><button onClick={()=>askMode("learning")} className={("rounded-lg border px-3 py-1 ")+(mode==="learning"?CLS.on:CLS.off)}>Learning</button><button onClick={()=>askMode("realistic")} className={("rounded-lg border px-3 py-1 ")+(mode==="realistic"?CLS.on:CLS.off)}>Realistic</button></div></div></div></header><main className="mx-auto grid max-w-6xl grid-cols-1 gap-4 p-4 lg:grid-cols-2"><section className={K}><h2 className="text-base font-semibold">Case</h2><pre className={"mt-2 whitespace-pre-wrap "+W+" p-3 text-sm leading-relaxed"}>{data.stem}</pre>{data.actions.examine&&data.userClass===null&&<Y detail={data.nihssDetail} onChoose={choose}/>}<div className="mt-3 flex flex-wrap gap-2"><button onClick={reset} className={CLS.btn}>New Case</button><button onClick={()=>finish()} disabled={data.finished} className={CLS.btn}>Finish Case</button>{data.finished&&(<button onClick={()=>setShow(v=>!v)} className={CLS.vio}>{show?"Hide Score":"Reveal Score"}</button>)}</div>{data.finished&&show&&(<div className="mt-3 inline-flex items-center gap-3 rounded-2xl border border-violet-800 bg-violet-900/30 px-3 py-2 text-sm"><span className="text-slate-300">Grade:</span><span className="text-xl font-extrabold text-violet-200">{S(data.score)}</span></div>)}</section><section className={K+" flex flex-col lg:row-span-2"}><h2 className="text-base font-semibold">Actions</h2><X onAction={act} disabled={data.finished} disabledMap={DM} hideSubs={mode==="realistic"}/><h2 className="mt-4 text-base font-semibold">Log</h2><div className="mt-2 flex-1 min-h-0 overflow-auto rounded-xl border border-slate-800 bg-slate-950/60 p-2 text-sm">{log.length===0?(<div className="text-slate-400">No activity yet.</div>):(log.map(r=>(<div key={r.id} className="border-b border-dashed border-slate-800 py-2 last:border-b-0"><div className="flex items-center gap-2"><J kind={r.kind}>{r.kind.toUpperCase()}</J><span className="text-slate-200">{r.text}</span></div></div>)))}</div></section><section className={K}><h2 className="text-base font-semibold">Case Snapshot</h2><N s={data}/></section></main><footer className="mx-auto max-w-6xl px-4 pb-6 -mt-2 text-center"><div className="flex items-center justify-center gap-2 text-[11px] text-slate-500"><span>designed by micah etter, md</span><span>•</span><span>educational use only</span><span>•</span><button onClick={()=>setCite(true)} className="underline hover:text-slate-300">Citations</button></div></footer><Q open={showCite} onX={()=>setCite(false)}/><D open={!!pAdmit} title={admitTitle} message={admitMsg} ok="Yes, admit" onX={()=>{setPA(null);push("Admission cancelled","No changes made.","warn",2000)}} onOK={()=>{const a=pAdmit;setPA(null);commitAdmit(a)}}/><D open={!!pMode} title="Switch mode?" message={modeMsg} ok="Switch mode" cancel="Stay here" onX={()=>setPM(null)} onOK={()=>{const m=pMode;setPM(null);applyMode(m)}}/><D open={!!pCancel} title="Cancel code stroke?" message="This will end the case now and no stroke intervention will be performed. Continue?" ok="Yes, cancel" cancel="Keep code active" onX={()=>setPC(false)} onOK={commitCancel}/></div>)}
try{A(S(99)!=="S");A(S(100)==="S");A(ASPECTS("known",120,"Basilar artery","Ischemic").score===10);A(ASPECTS("known",120,"PCA - P1","Ischemic").score===10);const base={type:"Ischemic",onsetType:"known",minutesSinceLKAW:180,doac:false,userClass:"disabling",actions:{ctNonCon:true,cta:true,ctp:false,mri:false},ctaOcclusion:"MCA - M1",ischemicVolume:0,perfMismatch:false,mriMismatch:false,baselineMrs:0,recentGISurgery:false,recentStroke30d:false,glucose:100,nihssDetail:{total:8}},_TNK=s=>TNKok(s),_EVT=s=>EVTok(s);A(CI({...base,doac:true}).length>0);A(CI({...base,glucose:55}).length>0);A(_TNK({...base})===true);A(_TNK({...base,doac:true})===false);A(_TNK({...base,recentGISurgery:true})===false);A(_TNK({...base,recentStroke30d:true})===false);A(_TNK({...base,glucose:55})===false);A(_TNK({...base,onsetType:"wake-up",ctaOcclusion:null,actions:{...base.actions,mri:true},mriMismatch:true})===true);A(_TNK({...base,onsetType:"unknown",ctaOcclusion:null,actions:{...base.actions,mri:true},mriMismatch:true})===true);A(_EVT({...base})===true);A(_EVT({...base,baselineMrs:5})===false);A(_EVT({...base,minutesSinceLKAW:8*60,ctaOcclusion:"MCA - distal M2",actions:{...base.actions,ctp:true},perfMismatch:true})===true);A(NONAC({onsetType:"unknown",minutesSinceLKAW:60})===true);A(NONAC({onsetType:"known",minutesSinceLKAW:23*60})===false);A(MRIok({...base,onsetType:"wake-up",ctaOcclusion:"PCA - P1",actions:{...base.actions,cta:true},userClass:"disabling"})===true);A(MRIok({...base,onsetType:"wake-up",ctaOcclusion:"MCA - M1",actions:{...base.actions,cta:true},userClass:"disabling"})===false);A(MRIok({...base,onsetType:"unknown",ctaOcclusion:null,actions:{...base.actions,cta:true},userClass:"disabling"})===true);const d1={facial:0,gaze:0,visual:0,armL:0,armR:0,legL:1,legR:0,language:0,dysarthria:0,ataxia:0,sensory:0,total:1},d2={facial:1,gaze:0,visual:0,armL:0,armR:0,legL:0,legR:0,language:0,dysarthria:1,ataxia:0,sensory:1,total:3},d3={facial:0,gaze:0,visual:0,armL:0,armR:1,legL:0,legR:0,language:0,dysarthria:0,ataxia:0,sensory:0,total:1},d4={facial:2,gaze:0,visual:0,armL:0,armR:0,language:0,legL:0,legR:0,dysarthria:0,ataxia:0,sensory:0,total:2};A(isDisab(d1,"right")===true);A(isDisab(d2,"right")===false);A(isDisab(d3,"right")===true);A(isDisab(d4,"right")===true);for(let i=0;i<120;i++){const s=pickOcc();A(["ICA","MCA - M1","MCA - proximal M2","MCA - distal M2","MCA - M3","MCA - M4","PCA - P1","ACA - A1","Basilar artery"].includes(s))}let seen=false;for(let i=0;i<200;i++){const c=gen("realistic");if(c.ctaOcclusion==="MCA - distal M2"){A(c.minutesSinceLKAW>360);seen=true;break}}if(!seen){}const admitBase={...base,nihssDetail:{total:12},actions:{...base.actions},type:"Ischemic"};A(admitOK({...admitBase,actions:{...admitBase.actions,tnk:true}},"nicu")===true);A(admitOK({...admitBase,nihssDetail:{total:2}},"floor")===true);A(typeof gen()==="object");A(typeof gen("realistic")==="object");A(ASPECTS("known",120,"MCA - M1","ICH").score===null);A(ASPECTS("known",120,"MCA - M1","Mimic").score===10);A(EVTok({...base,ctaOcclusion:"MCA - distal M2",minutesSinceLKAW:5*60})===true);A(MRIok({...base,userClass:"non"})===false);A(gen().stem.includes("stroke code"));A(/\\n/.test(gen().stem));A(ASPECTS("known",120,"PCA - P2","Ischemic").score===10);A(ASPECTS("known",120,"MCA - M1","SAH").score===null);A(_TNK({...base,onsetType:"unknown",ctaOcclusion:null,actions:{...base.actions,mri:false},mriMismatch:false})===false);A(_EVT({...base,ctaOcclusion:"PCA - P1"})===false);A(_EVT({...base,ctaOcclusion:null})===false);A(_TNK({...base,actions:{...base.actions,ctNonCon:false}})===false);A(ASPECTS("known",120,"Basilar artery","Mimic").score===10);A(NIH({type:"Ischemic",affectedSide:"left",dominantSide:"right",site:"Basilar artery"}).language===0);A(NIH({type:"Ischemic",affectedSide:"left",dominantSide:"right",site:"PCA - P1"}).language===0);{let I=0,A1=0,D=0,T=400;for(let i=0;i<T;i++){const c=gen("learning");if(c.type==="ICH")I++;else if(c.type==="SAH")A1++;else if(c.type==="SDH")D++}A(I>=30&&I<=90);A(A1>=2&&A1<=20);A(D>=4&&D<=30);A(T-(I+A1+D)>=250);}A(_TNK({...base,type:"ICH"})===false);A(_TNK({...base,type:"SAH"})===false);A(_TNK({...base,type:"SDH"})===false);A(_EVT({...base,type:"ICH",ctaOcclusion:"MCA - M1"})===false);A(admitOK({...base,type:"SDH",nihssDetail:{total:2},actions:{...base.actions}},"nicu")===true);{let got=0;for(let i=0;i<800;i++){const c=gen("learning");if(c.type==="ICH"){A(c.sbp>=180&&c.dbp>=95);got++}}A(got>=5)}{let w=0,g0=0,N=120;for(let i=0;i<N;i++){const d=NIH({type:"SDH",affectedSide:"left",dominantSide:"right",site:null});if(d.armL>0||d.legL>0)w++;if(d.gaze<=1)g0++}A(w>=70);A(g0>=80)}{let I=0,A2=0,D=0,E=0,M=0,N=1000;for(let i=0;i<N;i++){const c=gen("learning");if(c.type==="ICH")I++;else if(c.type==="SAH")A2++;else if(c.type==="SDH")D++;else if(c.type==="Ischemic")E++;else M++}A(M===0);A(I>=130&&I<=180);A(A2>=10&&A2<=30);A(D>=20&&D<=45);A(E>=720&&E<=860)}{let K0=0,N=1000;for(let i=0;i<N;i++){const c=gen("learning");if(c.doac||c.recentGISurgery||c.recentStroke30d||c.glucose<60)K0++}A(K0>=120&&K0<=180)}{for(let i=0;i<800;i++){const c=gen("learning");if(c.type!=="ICH"&&c.sbp<140)A(c.dbp<=99)}for(let i=0;i<800;i++){const c=gen("realistic");if(c.type!=="ICH"&&c.sbp<140)A(c.dbp<=99)}}}
catch(e){console.warn("tests",e)}

const root = ReactDOM.createRoot(document.getElementById('root'));
root.render(<App />);
